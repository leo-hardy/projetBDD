<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<title>Base de données livres</title>

<script type="text/javascript">


function AfficheCatalogue(f)
{
// Préparation de la structure XMLHttpRequest pour communiquer avec PHP
var xhr_object = null;
var S = "";
if (window.XMLHttpRequest) // Firefox
	{
		xhr_object = new XMLHttpRequest();
		// alert("OK");
	}
else if(window.ActiveXObject) // Internet Explorer
	{
	xhr_object = new ActiveXObject("Microsoft.XMLHTTP");
	}
else { // XMLHttpRequest non supporté par le navigateur
	alert("Votre navigateur ne supporte pas les objets XMLHTTPRequest...");
	return;
	}
// Préparation de l'appel avec la déclaration de la fonction qui de manière
// asynchrone rendra le résultat dans un temps indéterminé
xhr_object.open("POST", "Creerbase.php", true);

xhr_object.onreadystatechange = function() {
	if(xhr_object.readyState == 4)
	{
		// Cette instruction sera la dernière à s'exécuter dans ce code JS
		document.getElementById("AfficheCatalogueDiv").innerHTML =xhr_object.responseText;
	}
}

// Envoi de la requête PHP. A cet instant, le moment du retour est inconnu
xhr_object.setRequestHeader("Content-type","application/x-www-form-urlencoded");
var data = "";
xhr_object.send(data);
}



function Effacerbdd(f)
{
// Préparation de la structure XMLHttpRequest pour communiquer avec PHP
var xhr_object = null;
var S = "";
if (window.XMLHttpRequest) // Firefox
	{
		xhr_object = new XMLHttpRequest();
		// alert("OK");
	}
else if(window.ActiveXObject) // Internet Explorer
	{
	xhr_object = new ActiveXObject("Microsoft.XMLHTTP");
	}
else { // XMLHttpRequest non supporté par le navigateur
	alert("Votre navigateur ne supporte pas les objets XMLHTTPRequest...");
	return;
	}
// Préparation de l'appel avec la déclaration de la fonction qui de manière
// asynchrone rendra le résultat dans un temps indéterminé
xhr_object.open("POST", "Effacerbase.php", true);

xhr_object.onreadystatechange = function() {
	if(xhr_object.readyState == 4)
	{
		// Cette instruction sera la dernière à s'exécuter dans ce code JS
		document.getElementById("AfficheCatalogueDiv").innerHTML =xhr_object.responseText;
	}
}


// Envoi de la requête PHP. A cet instant, le moment du retour est inconnu
xhr_object.setRequestHeader("Content-type","application/x-www-form-urlencoded");
var data = "";
xhr_object.send(data);

}


</script>
</head>


<body>
<h1>Base de données &quot;Livres&quot;</h1>
<p>&nbsp;</p>

<form id="form1" name="form1" method="post" action="">
	Créer la bdd :
<input type="button" name="BoutonCreer" id="BoutonCreer" value="Livres"
onClick="AfficheCatalogue(this.form)"/>
</form>



<h2>Ajout d'enregistrements dans la base</h2>
<form id="form2" name="form2" method="post" action="">
	<label for="ListePHP">Table dans laquelle on veut ajouter un enregistrement</label>
	<select name="ListePHP" id="ListePHP">
		<?php
		$conn = new mysqli('localhost', 'root', '')
		or die("Impossible de se connecter : " . mysqli_error());
		mysqli_select_db ($conn,'livres') ;
		$sql = "SELECT table_name FROM information_schema.tables where table_schema='livres'";
		$req = mysqli_query($conn,$sql) 
		or die('Erreur SQL !<br />'.$sql.'<br/>'.mysqli_error($conn));
		while ($data = mysql_fetch_array($req))
		{
			$VItem = utf8_decode($data['table_name']);
			echo "<option>.$VItem.</option>";
			}
		mysqli_free_result ($req);
		mysqli_close ($conn);
		?>


	</select>
</form>

<p>&nbsp;</p>

 <button
 onclick="myFunction3()">bouton 3 pas compris
 </button>
<p>&nbsp;</p>

<form id="form2" name="form2" method="post" action="">
	Effacer la bdd :
<input type="button" name="BoutonEff" id="BoutonEff" value="Effacer"
onClick="Effacerbdd(this.form)"/>
</form>



<p>&nbsp;</p>


<p>&nbsp;</p>
<div id="AfficheCatalogueDiv"></div>
<p>&nbsp;</p>
<div id="AcheterOutilsDiv"></div>
</body>
</html>